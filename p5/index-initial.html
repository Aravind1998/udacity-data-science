<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Airline Performance, 2003-2014</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      h2 {
        color: black;
        text-align: center;
      }
    </style>

    <script type="text/javascript">
      format = d3.time.format("%Y");

      function draw(data) {
        'use strict';

        d3.select('#content')
          .append('h2')
          .attr('id', 'title')
          .text('Airline Performance, 2003-2014');

        var width = 960,
            height = 640;

        var svg = dimple.newSvg('#content', 960, 640);

        var myChart = new dimple.chart(svg, data);

        var x = myChart.addCategoryAxis('x', 'year');
        x.addOrderRule('Date');

        myChart.addMeasureAxis('y', 'on_time')
        myChart.addSeries('carrier_name', dimple.plot.line);

        myChart.addLegend(width*3/4, height/2 - 30, width/4, 60, 'right');

        myChart.draw();
      }
    </script>
  </head>
<body>
  <div class="container">
    <div class="row">
      <section id="content" class="col-md-12"></section>
    </div>
  </div>


  <script type="text/javascript">
    /*
     * Use D3 to load CSV file and use `draw` callback
     */
    d3.csv("data/data.csv", function(d) {
      return {
        year: format.parse(d.year),
        carrier_name: d.carrier_name,
        on_time: +d.on_time,
        arrivals: +d.arrivals
      };
    }, function(error, data) {
      // console.log(error);
      draw(data);
    });
  </script>
</body>
</html>